<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Group 4 - After Flood Scenario</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Group 4</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./overview.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html" rel="" target="">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-methodology" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Methodology</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-methodology">    
        <li>
    <a class="dropdown-item" href="./dataprep.html" rel="" target="">
 <span class="dropdown-text">Data Preparation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./before.html" rel="" target="">
 <span class="dropdown-text">Before Flood Scenario</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./during.html" rel="" target="">
 <span class="dropdown-text">During Flood Scenario</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./after.html" rel="" target="">
 <span class="dropdown-text">After Flood Scenario</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./resupply.html" rel="" target="">
 <span class="dropdown-text">Resupply to Shelters and Hospitals</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./results.html" rel="" target="">
 <span class="menu-text">Results and Discussion</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lessons.html" rel="" target="">
 <span class="menu-text">Lessons Learnt</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-the-scene" id="toc-setting-the-scene" class="nav-link active" data-scroll-target="#setting-the-scene">Setting the Scene</a></li>
  <li><a href="#getting-airport-points" id="toc-getting-airport-points" class="nav-link" data-scroll-target="#getting-airport-points">Getting airport points</a></li>
  <li><a href="#finding-roads-to-derna-from-airports" id="toc-finding-roads-to-derna-from-airports" class="nav-link" data-scroll-target="#finding-roads-to-derna-from-airports">Finding Roads to Derna from Airports</a></li>
  <li><a href="#shortest-path-to-flooded-neighbourhoods-for-logistical-resupply" id="toc-shortest-path-to-flooded-neighbourhoods-for-logistical-resupply" class="nav-link" data-scroll-target="#shortest-path-to-flooded-neighbourhoods-for-logistical-resupply">Shortest Path to flooded neighbourhoods for logistical resupply</a>
  <ul class="collapse">
  <li><a href="#getting-satellite-data-to-check-road-usability" id="toc-getting-satellite-data-to-check-road-usability" class="nav-link" data-scroll-target="#getting-satellite-data-to-check-road-usability">Getting satellite data to check road usability</a></li>
  <li><a href="#filter-out-usable-roads" id="toc-filter-out-usable-roads" class="nav-link" data-scroll-target="#filter-out-usable-roads">Filter out usable roads</a></li>
  </ul></li>
  <li><a href="#getting-water-plant-points" id="toc-getting-water-plant-points" class="nav-link" data-scroll-target="#getting-water-plant-points">Getting water plant points</a></li>
  <li><a href="#finding-road-to-derna-for-waterplants" id="toc-finding-road-to-derna-for-waterplants" class="nav-link" data-scroll-target="#finding-road-to-derna-for-waterplants">Finding road to Derna for Waterplants</a></li>
  <li><a href="#shortest-path-to-flooded-neighbourhoods-for-water-resupply" id="toc-shortest-path-to-flooded-neighbourhoods-for-water-resupply" class="nav-link" data-scroll-target="#shortest-path-to-flooded-neighbourhoods-for-water-resupply">Shortest path to flooded neighbourhoods for water resupply</a></li>
  <li><a href="#mapping" id="toc-mapping" class="nav-link" data-scroll-target="#mapping">Mapping</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">After Flood Scenario</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="setting-the-scene" class="level1">
<h1>Setting the Scene</h1>
<p>We will refer to the OpenStreetMap as a gauge of where the locations are outside of the hexagon layer.&nbsp;</p>
<p>Since the airports and the water plants are quite a distance away from the city, we will use the osm roads to map out the shortest path they will take to a chosen location on the highways leading into the city. Afterwhich, we will use the EMSR GRA transportationL roads to map the shortest path from those locations to the flood neighbourhood centroids, since those roads are more accurate in terms of damage and usability.</p>
</section>
<section id="getting-airport-points" class="level1">
<h1>Getting airport points</h1>
<p>We will use osm_transport_a(polygon),since the point files donâ€™t have Martuba airport we will be using the polygons instead.</p>
<p><img src="images/image78.png" class="img-fluid"></p>
<p>Manually select Martuba and Bombah(ctrl+select these 2 polygons), then extract.</p>
<p><img src="images/image128.png" class="img-fluid"></p>
<p>Then find their centroids, we will use these as the starting point for airports, the other airport,Al Abraq, is too far for consideration.</p>
<p><img src="images/image144.png" class="img-fluid"></p>
<p><img src="images/image58.png" class="img-fluid"></p>
</section>
<section id="finding-roads-to-derna-from-airports" class="level1">
<h1>Finding Roads to Derna from Airports</h1>
<p>Since the trucks will be using the highway to travel to the city, we will choose the point where the city crosses with the highway as our end point used to see how long the trucks will take to reach Derna using the shortest path function.</p>
<p><img src="images/image149.jpg" class="img-fluid"></p>
<p>Using shortest path(layer to point):</p>
<p>End point will be 167138.713234,3624742.546023 [EPSG:3197]</p>
<p><img src="images/image77.png" class="img-fluid"></p>
<p><img src="images/image104.png" class="img-fluid"></p>
</section>
<section id="shortest-path-to-flooded-neighbourhoods-for-logistical-resupply" class="level1">
<h1>Shortest Path to flooded neighbourhoods for logistical resupply</h1>
<p>From that midpoint, use the Shortest Path function to map out the shortest path using the EMSR GRA transportation road network, as that will show the best possible pathway for the resupplies to enter the flooded neighbourhoods to resupply, taking the degree of damage into consideration. It also shows possible bridges to cross the river, which osm does not include. Hence, we will use the EMSR GRA layer to map the best way to resupply to flooded areas as people return home.</p>
<section id="getting-satellite-data-to-check-road-usability" class="level2">
<h2 class="anchored" data-anchor-id="getting-satellite-data-to-check-road-usability">Getting satellite data to check road usability</h2>
<p>We will be using satellite data to compare with the EMSR GRAroads, to double check their usability in the flooded neighbourhoods.</p>
<p>From the Open Aerial Map data, we will load in the layer and clip by extent. We will be using the hexagon layer of Derna as our overlay layer.</p>
<p><img src="images/image136.png" class="img-fluid"></p>
<p>This will be the final product after clipping. We will name it 13_09_23.</p>
<p>We will classify the EMSR roads and compare their usability with the satellite data.</p>
<p><img src="images/image7.png" class="img-fluid"></p>
<p><img src="images/image12.png" class="img-fluid"></p>
<p>For the green damaged roads, we can see that the roads have been mostly covered and affected by the floods, presumably with the dirt and sand and other sediment from flooding. Hence, we will exclude them.</p>
<p><img src="images/image5.png" class="img-fluid"></p>
<p><img src="images/image112.png" class="img-fluid"></p>
<p>For the destroyed roads, we can see that they have been devastated by the flood, with most if not all of them being unusable and broken, due to the flooding and destruction. We will similarly exclude them.</p>
<p><img src="images/image88.png" class="img-fluid"></p>
<p>For the possibly damaged roads, it can be seen that a majority are actually still usable, with a lot of cars and other vehicles such as trucks still being seen and used based on the data. The roads also appear to be quite clear of excessive dirt and sediment, so they are still drivable in this current situation. Hence, we will include and use them.</p>
</section>
<section id="filter-out-usable-roads" class="level2">
<h2 class="anchored" data-anchor-id="filter-out-usable-roads">Filter out usable roads</h2>
<p>We will filter out the non destroyed and damaged roads to be used.</p>
<p>We select all the NULL values, then in the field calculator we update the existing "damage_gra" field to replace the null with normal roads.</p>
<p><img src="images/image155.png" class="img-fluid"></p>
<p>Save the changes.</p>
<p>We select the non-damaged roads.</p>
<p><img src="images/image121.png" class="img-fluid"></p>
<p>We extract and save these roads to use for the shortest path. The start point will be our previous end point.</p>
<p><img src="images/image116.png" class="img-fluid"></p>
<p><img src="images/image143.png" class="img-fluid"></p>
<p>The network of the shortest path to resupply the neighbourhoods will be as follows.</p>
</section>
</section>
<section id="getting-water-plant-points" class="level1">
<h1>Getting water plant points</h1>
<p>Next, we will map the shortest path for water trucks to bring in fresh water as the pipes will have been damaged during the flood.&nbsp;</p>
<p>For the Sousa water plant, extract out the waterworks point from the poi layer in osm. We will use google maps as a rough approximation of the Sousa desalination plant.</p>
<p><img src="images/image14.png" class="img-fluid"></p>
<p>We will extract out this water_works point as our Sousa plant.</p>
<p>From our poi area(polygon), we also select out water_works by expression.</p>
<p><img src="images/image34.png" class="img-fluid"></p>
<p><img src="images/image27.png" class="img-fluid"></p>
<p>We will use this as our Derna desalination plant. The UN stated that both these water plants were to be reactivated for water supply use, so we will map out the network of shortest paths to resupply water for the flooded neighbourhoods.</p>
<p>We will extract out this specific selected polygon, after deselecting the others. We will use the centroid function to find the centroid point to map.</p>
<p><img src="images/image17.png" class="img-fluid"></p>
<p>We will merge these 2 water plant layers into one using the merge vector layers function. Ensure the project CRS is correct.</p>
<p><img src="images/image99.png" class="img-fluid"></p>
</section>
<section id="finding-road-to-derna-for-waterplants" class="level1">
<h1>Finding road to Derna for Waterplants</h1>
<p>Next, we will use the shortest path function to map out the shortest path from the points into the city using the highway.</p>
<p>We will select the point here as it is going towards the city and nearest to the Derna plant.</p>
<p><img src="images/image45.jpg" class="img-fluid"></p>
<p>The end point will be 163989.554567,3627317.923206 [EPSG:3197].</p>
</section>
<section id="shortest-path-to-flooded-neighbourhoods-for-water-resupply" class="level1">
<h1>Shortest path to flooded neighbourhoods for water resupply</h1>
<p>Similarly, we will map the shortest path from the end point to the centroids using shortest path and usable EMSR roads.</p>
<p><img src="images/image81.png" class="img-fluid"></p>
</section>
<section id="mapping" class="level1">
<h1>Mapping</h1>
<p>We will change the symbology accordingly, making the flood extent an outline, changing the colour of the centroids and roads, as well as the thickness of roads for a better view.</p>
<p>Follow similar steps from the previous scenarios to create these maps, one showing the resupply routes for water and logistics. We create two maps, one zoomed in to the flood extent/within Derna, the other zoomed out to show the origin points (airports or desalination plants).</p>
<p>We create a legend and scalebar for each map. For the smaller map showing the zoomed-out map, we check 'Frame' to outline it from the other map.</p>
<p><img src="images/image53.png" class="img-fluid"></p>
<p>We obtain the following maps:</p>
<p><img src="images/image75.png" class="img-fluid"></p>
<p><img src="images/image161.png" class="img-fluid"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>